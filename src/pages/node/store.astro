---
import Layout from "../../layouts/Layout.astro";
import ListStore from "../../components/ListStore.jsx";
import AddProduct from "../../components/AddProduct";

// Obtener el token desde las cookies de Astro
const token = Astro.cookies.get("token");

// Si el token es un objeto, extraemos la propiedad 'value'
const tokenValue = token && token.value ? token.value : token;

console.log('Token recuperado desde las cookies:', tokenValue);  // Verificar el valor del token
---

<Layout>
  <div class="container mx-auto p-8">
    <h1 class="text-4xl font-bold text-valorant mb-8">Productos</h1>

    <div class="flex justify-end space-x-4 mb-4">
      <a href="/node/register" class="bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition duration-200">
        Registrarse
      </a>
      <a href="/node/login" class="bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition duration-200">
        Iniciar Sesi√≥n
      </a>
    </div>

    <AddProduct token={tokenValue} client:only/>

    <!-- Pasar el token como prop a ListStore -->
    <ListStore client:load token={tokenValue} />
  </div>
</Layout>
